{
  "base_images": {
    "python": {
      "3.9": "python:3.9-slim",
      "3.10": "python:3.10-slim",
      "3.11": "python:3.11-slim",
      "3.12": "python:3.12-slim"
    },

    "node": {
      "18": "node:18-slim",
      "20": "node:20-slim"
    },

    "c": {
      "gcc": "gcc:13"
    },

    "cpp": {
      "gcc": "gcc:13"
    },

    "java": {
      "17": "eclipse-temurin:17-jdk",
      "21": "eclipse-temurin:21-jdk"
    },

    "go": {
      "1.21": "golang:1.21-alpine",
      "1.22": "golang:1.22-alpine"
    }
  },

  "install_presets": {
    "python-verify": {
      "steps": [
        "RUN python -m pip install --upgrade pip",
        "COPY requirements.txt .",
        "RUN pip install --no-cache-dir -r requirements.txt"
      ]
    },

    "node-npm": {
      "steps": [
        "COPY package*.json .",
        "RUN npm install"
      ]
    },

    "java-maven": {
      "steps": [
        "COPY pom.xml .",
        "RUN mvn -B -q dependency:resolve"
      ]
    },

    "go-mod": {
      "steps": [
        "COPY go.mod go.sum .",
        "RUN go mod download"
      ]
    },

    "c-build-essential": {
      "steps": []
    },

    "cpp-build-essential": {
      "steps": []
    },

    "none": {
      "steps": []
    }
  },

  "run_profiles": {
    "python-syntax": {
      "cmd": ["python", "-m", "py_compile", "{entry}"]
    },
    "python-imports": {
      "cmd": ["python", "-c", "import {module}"]
    },
    "python-run": {
      "cmd": ["python", "{entry}"]
    },
    "python-test": {
      "cmd": ["pytest", "-q"]
    },

    "node-run": {
      "cmd": ["node", "{entry}"]
    },
    "node-test": {
      "cmd": ["npm", "test"]
    },
    "node-build": {
      "cmd": ["npm", "run", "build"]
    },

    "c-compile": {
      "cmd": ["gcc", "-Wall", "-Werror", "{entry}", "-o", "a.out"]
    },
    "c-run": {
      "cmd": ["./a.out"]
    },

    "cpp-compile": {
      "cmd": ["g++", "-std=c++17", "-Wall", "-Werror", "{entry}", "-o", "a.out"]
    },
    "cpp-run": {
      "cmd": ["./a.out"]
    },

    "java-compile": {
      "cmd": ["mvn", "-q", "compile"]
    },
    "java-test": {
      "cmd": ["mvn", "-q", "test"]
    },
    "java-jar": {
      "cmd": ["java", "-jar", "{jar}"]
    },

    "go-build": {
      "cmd": ["go", "build", "./..."]
    },
    "go-test": {
      "cmd": ["go", "test", "./..."]
    },
    "go-run": {
      "cmd": ["go", "run", "{entry}"]
    }
  }
}
